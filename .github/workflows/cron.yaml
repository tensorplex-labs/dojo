name: GHCR Cleanup

on:
  workflow_dispatch:
  schedule:
    - cron: "0 16 * * 0" # UTC Time!
jobs:
  cleanup_ghcr:
    name: Cleanup untagged images
    runs-on: arc-runner-set
    permissions:
      packages: write
    steps:
      - name: Ghcr.io Cleanup Action
        uses: dataaxiom/ghcr-cleanup-action@v1.0.16
        with:
          packages: '^dojo-v2(/.*)?$'
          expand-packages: true
          use-regex: true
          token: ${{ secrets.CLEANUP_TOKEN }}
